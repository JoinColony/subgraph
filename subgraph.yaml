specVersion: 0.0.2
description: A subgraph for the colonyNetwork
repository: 'https://github.com/JoinColony/subgraph'
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ColonyNetwork
    network: mainnet
    source:
      address: '0x45B17FF6998D4d76A10a32621A71773E3722DA65'
      abi: IColonyNetwork
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Colony
      abis:
        - name: IColonyNetwork
          file: ./../colonyNetwork/build/contracts/IColonyNetwork.json
        - name: Token
          file: ./../colonyNetwork/build/contracts/Token.json
      eventHandlers:
        - event: 'ColonyAdded(indexed uint256,indexed address,address)'
          handler: handleColonyAdded
        - event: 'ColonyLabelRegistered(indexed address,bytes32)'
          handler: handleColonyLabelRegistered
        - event: 'ExtensionInstalled(indexed bytes32,indexed address,uint256)'
          handler: handleExtensionInstalled
      file: ./src/mappings/colonyNetwork.ts
templates:
  - name: Token
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Token
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/token.ts
      entities:
        - Token
      abis:
        - name: Token
          file: ./../colonyNetwork/build/contracts/Token.json
      eventHandlers: []
  - name: OneTxPayment
    kind: ethereum/contract
    network: mainnet
    source:
      abi: OneTxPayment
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/oneTxPayment.ts
      entities:
        - OneTxPayment
      abis:
        - name: OneTxPayment
          file: ./../colonyNetwork/build/contracts/OneTxPayment.json
      eventHandlers:
        - event: 'OneTxPaymentMade(address,uint256,uint256)'
          handler: handleOneTxPaymentMade
  - name: Colony
    kind: ethereum/contract
    network: mainnet
    source:
      abi: IColony
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mappings/colony.ts
      entities:
        - Domain
      abis:
        - name: IColony
          file: ./../colonyNetwork/build/contracts/IColony.json
        - name: Token
          file: ./../colonyNetwork/build/contracts/Token.json
      eventHandlers:
        - event: 'DomainAdded(address,uint256)'
          handler: handleDomainAdded
        - event: DomainAdded(uint256)
          handler: handleHistoricDomainAdded
        - event: 'DomainMetadata(address,indexed uint256,string)'
          handler: handleDomainMetadata
        - event: 'PaymentAdded(address,uint256)'
          handler: handlePaymentAdded
        - event: 'PaymentPayoutSet(address,indexed uint256,address,uint256)'
          handler: handlePaymentPayoutSet
        - event: 'ColonyMetadata(address,string)'
          handler: handleColonyMetadata
        - event: 'TokensMinted(address,address,uint256)'
          handler: handleTokensMinted
