type Colony @entity {
  id: ID! # Address
  ensName: String
  orbitAddress: String
  colonyChainId: BigInt!
  token: Token
  domains: [Domain!]!
  metadata: String
  metadataHistory: [ColonyMetadata!]! @derivedFrom(field: "colony")
  extensions: [ColonyExtension!] @derivedFrom(field: "colony")
}

type ColonyMetadata @entity {
  id: ID! # colonyAddress_transactionHash_logId
  colony: Colony!
  transaction: Transaction!
  metadata: String
}

type Domain @entity {
  id: ID! # colonyAddress_domain_domainId
  domainChainId: BigInt!
  parent: Domain
  name: String
  colonyAddress: String
  metadata: String
  metadataHistory: [DomainMetadata!]! @derivedFrom(field: "domain")
}

type DomainMetadata @entity {
  id: ID! # colonyAddress_domainId_transactionHash_logId
  domain: Domain!
  transaction: Transaction!
  metadata: String
}

type Payment @entity {
  id: ID!
  domain: Domain
  colony: Colony
  to: String
  fundingPot: FundingPot
  paymentChainId: BigInt
}

type Expenditure @entity {
  id: ID!
}

type OneTxPayment @entity {
  id: ID! #colonyAddress_oneTxPayment_noOfPayouts_PayoutId (payout id is left zero padded to 18 chars)
  domain: Domain
  fundamentalChainId: BigInt
  timestamp: BigInt
  nPayouts: BigInt
  agent: String
  transaction: Transaction
  expenditure: Expenditure
  payment: Payment
}

type Token @entity {
  id: ID!
  decimals: BigInt
  symbol: String
}

type FundingPot @entity {
  id: ID!
  fundingPotPayouts: [FundingPotPayout!]!
}

type FundingPotPayout @entity {
  id: ID!
  token: Token
  amount: BigInt
  fundingPotChainId: BigInt
}

type Transaction @entity {
  id: ID!
  block: Block
}

type Block @entity {
  id: ID!
  timestamp: BigInt
}

type Event @entity {
  id: ID! # globalEventCount_txHash_event_logIndex (event count is left zero padded to 18 chars)
  domain: Domain
  timestamp: BigInt
  transaction: Transaction
  address: String
  associatedColony: Colony
  name: String
  args: String
}

type ColonyExtension @entity {
  id: ID! # extensionAddress
  colony: Colony!
  hash: String!
}

type Motion @entity {
  id: ID! # colonyAddress_motion_extensionAddress_motionId (motion id is left zero padded to 18 chars)
  fundamentalChainId: BigInt
  action: String
  extensionAddress: String
  associatedColony: Colony
  transaction: Transaction
  agent: String
  domain: Domain
  stakes: [BigInt!]
  requiredStake: BigInt
  escalated: Boolean
  timestamp: BigInt
}

type CoinMachinePeriod @entity {
  id: ID! # colonyAddress_coinMachine_extensionAddress_saleEnd
  saleEndedAt: BigInt!
  colonyAddress: String!
  tokensBought: BigInt
  price: BigInt
}
